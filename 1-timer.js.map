{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Підключення бібліотек\nimport flatpickr from \"flatpickr\";\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів бібліотек\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst dateInput = document.querySelector(\"#datetime-picker\");\nconst timerStartBtn = document.querySelector(\"[data-start]\");\n\nconst dataDays = document.querySelector(\"[data-days]\");\nconst dataHours = document.querySelector(\"[data-hours]\");\nconst dataMinutes = document.querySelector(\"[data-minutes]\");\nconst dataSeconds = document.querySelector(\"[data-seconds]\");\n\nlet userSelectedDate = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,  \n  onClose(selectedDates) {\n    if (selectedDates[0] <= Date.now()) {\n      timerStartBtn.setAttribute(\"disabled\", \"\");\n      iziToast.error({\n        position: \"topRight\",\n        color: \"#ffffff\",\n        message: \"Please choose a date in the future\",        \n        messageColor: \"#ffffff\",\n        messageSize: \"16\",\n        messageLineHeight: '150%',\n        backgroundColor: \"#ef4040\",\n        progressBarColor: \"#b51b1b\",\n        icon: \"bi bi-x-octagon\",\n        iconColor: \"#fafafb\",\n      });\n      return;\n    }    \n\n    timerStartBtn.removeAttribute(\"disabled\");\n    userSelectedDate = selectedDates[0];\n  },\n};\n\nconst fp = flatpickr(dateInput, options);\n\ntimerStartBtn.setAttribute(\"disabled\", \"\");\ntimerStartBtn.addEventListener(\"click\", startTimer);\n\n\nfunction startTimer() { \n  \n  const intervalId = setInterval(() => {\n    const leftMiliseconds = userSelectedDate - Date.now();\n\n    if (leftMiliseconds > 0) {\n\n      dateInput.setAttribute(\"disabled\", \"\");\n      timerStartBtn.setAttribute(\"disabled\", \"\");\n      \n      const leftTimeObj = convertMs(leftMiliseconds);\n      \n      dataDays.textContent = addLeadingZero(leftTimeObj.days);\n      dataHours.textContent = addLeadingZero(leftTimeObj.hours);\n      dataMinutes.textContent = addLeadingZero(leftTimeObj.minutes);\n      dataSeconds.textContent = addLeadingZero(leftTimeObj.seconds);     \n      \n    } else {\n\n      dateInput.removeAttribute(\"disabled\");      \n      clearInterval(intervalId);\n\n    }\n  },\n    1000);  \n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, \"0\");\n}\n"],"names":["dateInput","timerStartBtn","dataDays","dataHours","dataMinutes","dataSeconds","userSelectedDate","options","selectedDates","iziToast","flatpickr","startTimer","intervalId","leftMiliseconds","leftTimeObj","convertMs","addLeadingZero","ms","days","hours","minutes","seconds","value"],"mappings":"+IAOA,MAAMA,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAgB,SAAS,cAAc,cAAc,EAErDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAE3D,IAAIC,EAAmB,KAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,GAAIA,EAAc,CAAC,GAAK,KAAK,IAAG,EAAI,CAClCP,EAAc,aAAa,WAAY,EAAE,EACzCQ,EAAS,MAAM,CACb,SAAU,WACV,MAAO,UACP,QAAS,qCACT,aAAc,UACd,YAAa,KACb,kBAAmB,OACnB,gBAAiB,UACjB,iBAAkB,UAClB,KAAM,kBACN,UAAW,SACnB,CAAO,EACD,MACD,CAEDR,EAAc,gBAAgB,UAAU,EACxCK,EAAmBE,EAAc,CAAC,CACnC,CACH,EAEWE,EAAUV,EAAWO,CAAO,EAEvCN,EAAc,aAAa,WAAY,EAAE,EACzCA,EAAc,iBAAiB,QAASU,CAAU,EAGlD,SAASA,GAAa,CAEpB,MAAMC,EAAa,YAAY,IAAM,CACnC,MAAMC,EAAkBP,EAAmB,KAAK,IAAG,EAEnD,GAAIO,EAAkB,EAAG,CAEvBb,EAAU,aAAa,WAAY,EAAE,EACrCC,EAAc,aAAa,WAAY,EAAE,EAEzC,MAAMa,EAAcC,EAAUF,CAAe,EAE7CX,EAAS,YAAcc,EAAeF,EAAY,IAAI,EACtDX,EAAU,YAAca,EAAeF,EAAY,KAAK,EACxDV,EAAY,YAAcY,EAAeF,EAAY,OAAO,EAC5DT,EAAY,YAAcW,EAAeF,EAAY,OAAO,CAElE,MAEMd,EAAU,gBAAgB,UAAU,EACpC,cAAcY,CAAU,CAG3B,EACC,GAAI,CACR,CAEA,SAASG,EAAUE,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASL,EAAeM,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}